// Исходные данные: объект с информацией о текущей дате
var dateObj = {
  timezone: "Europe/Moscow",
  formatted: "2025-11-06",
  timestamp: 1762439903124,
  weekDay: 4,
  day: 10,
  month: 11,
  year: 2025,
  hour: 17,
  minute: 38
};

// Переменная new_date может содержать:
// - число (например, 11) - конкретный день месяца
// - строку "искать ближайшее"
var new_date = 11;

//Определение центрального дня периода
var centerDay;
if (new_date === "искать ближайшее") {
  // Если указана команда "искать ближайшее", то центральным днем будет текущий день + 2 дня
  centerDay = dateObj.day + 2;
} else {
  // Если указано число, используем его как центральный день
  centerDay = new_date;
}

// Расчет начала и конца периода, он составляет 4 дня: 2 дня до центрального и 2 дня после

var startDay; 
// Начало периода (за 2 дня до центрального), обязательно проверяем, день, не прошёл ли он.
if(centerDay - 2 < dateObj.day){
    startDay = dateObj.day;
} else {
    startDay = centerDay - 2;
}
var endDay = centerDay + 2;   // Конец периода (через 2 дня после центрального)

//Форматирование месяца с ведущим нулем
var monthStr;
if (dateObj.month < 10) {
  // Если месяц меньше 10, добавляем ведущий ноль
  monthStr = '0' + dateObj.month;
} else {
  // Если месяц 10 или больше, оставляем как есть
  monthStr = '' + dateObj.month;
}

//Форматирование дня начала периода с ведущим нулем
var startDayStr;
if (startDay < 10) {
  // Если день начала меньше 10, добавляем ведущий ноль
  startDayStr = '0' + startDay;
} else {
  // Если день начала 10 или больше, оставляем как есть
  startDayStr = '' + startDay;
}

//Форматирование дня конца периода с ведущим нулем
var endDayStr;
if (endDay < 10) {
  // Если день конца меньше 10, добавляем ведущий ноль
  endDayStr = '0' + endDay;
} else {
  // Если день конца 10 или больше, оставляем как есть
  endDayStr = '' + endDay;
}

//Формирование итоговых строк дат в формате ISO 8601
// dt_start: начало периода (первый день в 00:00:00)
var dt_start = dateObj.year + '-' + monthStr + '-' + startDayStr + 'T00:00:00';
// dt_end: конец периода (последний день в 23:59:59)
var dt_end = dateObj.year + '-' + monthStr + '-' + endDayStr + 'T23:59:59';

// Вывод результата
console.log(dt_start, " И ", dt_end);
